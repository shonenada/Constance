绪论
====

1.1 操作系统概述

1.1.1 操作系统定义
    操作系统（Operating System，OS）是管理计算机硬件设备与软件资源的计算机程序，是计算机系统核心与基石头。操作系统负责为软件资源分配、管理内存资源；决定进程执行的先后顺序，对进程进行调度；负责控制输入输出设备，例如监听键盘的输入，打印字符到屏幕；管理文件系统等。
    操作系统形态繁多，不同机器的操作系统不尽相同。除了 PC 上常见的操作系统外，还有如许多其他类型的系统，如，非智能手机的嵌入式系统，安卓手机的安卓系统，以及超级计算机的大型操作系统。
    一般来说，操作系统应该拥有以下的特性：
    1. 并发性，即多道作业在用一段时间间隔内执行。
    2. 共享性，即操作系统中的资源可由内存中的多个并发执行的进程共同使用，又称资源复用。
    3. 虚拟技术，通过某种技术，将物理上单一实体变为多个逻辑对应体。
    4. 异步性，即多道作业之间执行顺序、执行时间间隔并无法预测。
    操作系统理论在计算机科学中，作为历史悠久而又活跃的分支而存在着，并且是软件工业的基础与核心。

1.1.2 操作系统主要功能
    1.1.2.1 处理机管理功能
        1.1.2.1.1 进程控制
            要使作业能够运行，必须为它创建对应的进程，并分配必要的资源。而当进程运行结束时，也应该立即撤销进程，回收资源。
            进程控制还负责控制进程的状态转换。在现代操作系统中，进程还已经具有创建若干个线程的功能。
        1.1.2.1.2 进程同步
            在操作系统中，进程以无法预测的速度执行。为了使得进程之间能够有条不紊地运行，操作系统中必须设置进程同步机制。
            同步的方式有两种，分别是“进程互斥方式”和“进程同步方式”。进程互斥方式是指，在不同进程访问同一个临界资源的时候，应该采用互斥方式。进程同步方式是指在相互合作完成共同任务的的进程（线程）间，应该由同步机制对不同进程的执行次序进行管理。
        1.1.2.1.3 进程通信
            在多程序环境下，为了加快程序执行速度，系统会为进程创建若干线程，由这些线程共同合作完成一个任务。在这些线程之间，通常都需要交换信息以顺利地、正确地完成进程。进程通信的任务就是用来实现相互合作的进程、线程之间的信息交换。
        1.1.2.1.4 调度
            在后背队列上等待的每个作业都需要进程调度程序调度后才能执行。在传统操作系统中，包括作业调度和进程调度两步。
            作业调度，是指从作业后备队列中，根据一定的算法选出若干跟作业，为他们分配所需的资源，建立进程，放入就绪队列，等待执行。
            进程调度，是指从进行就绪队列中，按照一定算法选出一个进程，为其分配处理机，并设置现场，使进程投入使用。
    1.1.2.2 存储器管理功能
        1.1.2.2.1 内存分配
            进程执行需要一定的内存空间，内存分配的任务即是为每道程序分配内存空间。通过一定的算法，提高内存空间的使用率，降低不可用的内存空间。
            内存分配可使用动态内存分配和静态内存分配两种方式。静态分配方式，即在作业装入内存时候即确定内存空间，不允许作业再申请内存空间，也不允许见作业在内存中进行“移动”。而动态内存分配则根据作业的需求，在作业装入时确定内存空间，但允许作业申请附加内存空间，以满足程序的数据增长的要求。
            内存分配模块需要具有下面的结构、功能：
            1. 内存分配数据结构。记录内存空间的使用情况。
            2. 内存分配功能。按照一定算法为用户程序分配内存空间。
            3. 内存回收功能。对不再需要的内存空间进行回收。
        1.1.2.2.2 内存保护
            为了保证操作系统能够安全可靠地运行，需要隔离系统内核占用的内存空间和用户程序占用的内存空间。因此，内存管理还需要对内核内存进行保护。这个保护机制将由硬件进行检查，而发生越界后的响应则由软件来完成。
        1.1.2.2.3 地址映射
            应用程序被编译成目标程序的地址都是从“0”开始，在多道程序环境下，每道程序不可能都从“0”地址开始，因此需要提供地址映射功能，将地址空间中的逻辑地址转换为地址空间中对应的物理地址。
        1.1.2.2.4 内存扩充
           内存扩充并不是扩大物理内存容量，而是借助虚拟存储技术，扩大内存逻辑容量以达到改善系统性能的目的。
           当内存空间不足以容纳已的进程时，操作系统能将内存中一部分暂时并不需要使用的程序或数据调入硬盘设备，腾出足够的内存空间。
    1.1.2.3 设备管理功能
        1.1.2.3.1 缓冲管理
            由于 CPU 执行计算高速型与 I/O 设备的低速性矛盾，当进程请求 I/O 设备时，CPU 的利用率将会被严重降低。为了可以缓解两者之间的速度矛盾，操作系统需要在 CPU 和 I/O 设备之间引入缓冲，提高 CPU 利用率。
        1.1.2.3.2 设备分配
            根据用户进程的 I/O 请求以及系统现有资源的情况，根据某种设备分配规则，为进程分配所需的设备。
            为了完成设备分配，操作系统需要设置设备控制表、控制器表，等，以记录硬件设备以及控制器的使用情况。
        1.1.2.3.3 设备处理
            设备处理又称设备驱动程序。它的任务是完成 CPU 和设备控制器之间的通信。
            设备处理过程，设备处理程序首先会检查 I/O 请求是否合法，检查设备是否允许使用（是否空闲），传递相关参数，设置设备的工作方式。随后向设备控制器发送 I/O 命令，完成 I/O 操作。设备控制器完成操作后，根据情况向设备处理程序发送中断请求，设备处理程序调用响应的中断处理程序进行处理。
    1.1.2.4 文件管理功能
        1.1.2.4.1 文件存储空间管理
            为了方便用户的使用，文件系统会对诸多文件已经文件存储空间实施管理。为每个文件分配必要的外存空间，提高外存的利用率，有助于提高文件系统的存取速度。
        1.1.2.4.2 目录管理
            目录管理可以方便用户找到自己所需的文件。通常，文件系统会为每个文件建立一个目录项。包括文件名，文件属性，文件所在磁盘上的物理位置等等。文件系统对这些文件的目录项进行有效的组织，从而达到方便按名字存取等功能。
            除此之外，目录管理还能实现文件共享。同一份文件可以对应存在于不同的目录下，节省外存空间。
        1.1.2.4.3 文件读写管理
            根据用户的请求，从外存中读取数据，或者将内存中的数据写入外存。
        1.1.2.4.4 文件保存
            文件保存是为了防止操作系统中的系统文件被非法破坏或窃取，文件系统中必须提供有效的存取控制功能。
    1.1.2.5 操作系统与用户之间的接口
        1.1.2.5.1 用户接口
            用户接口是提供给用户使用的系统服务接口。用户可以通过这个接口取得操作系统的服务。
        1.1.2.5.2 程序接口
            程序接口则是提供给编程时使用的接口。这一是用户程序取得系统服务的唯一途径。

1.1.3 操作系统历史与现况

1.1.4 操作系统大家庭

1.2 操作系统开发目的与意义

1.3 开发环境工具

1.3.1 Bochs

1.3.2 nasm

1.3.3 gcc
